# 安全配置文档

## 概述

本文档描述了 Agent Store 前端项目的安全措施和最佳实践。

## 安全措施

### 1. 输入验证

- **搜索输入验证**: 所有用户输入都经过验证和清理
- **XSS 防护**: 移除潜在的 HTML 标签和脚本
- **长度限制**: 搜索查询限制为 100 字符
- **类型检查**: 使用 TypeScript 进行类型安全验证

### 2. 安全头配置

在 `next.config.js` 中配置了以下安全头：

- `X-Frame-Options: DENY` - 防止点击劫持
- `X-Content-Type-Options: nosniff` - 防止 MIME 类型嗅探
- `Referrer-Policy: strict-origin-when-cross-origin` - 控制 referrer 信息
- `X-XSS-Protection: 1; mode=block` - 启用 XSS 保护

### 3. 图片安全

- 限制允许的图片域名
- 支持 WebP 和 AVIF 格式
- 图片懒加载和错误处理

### 4. 环境变量安全

- 使用 `NEXT_PUBLIC_` 前缀的环境变量会在客户端暴露
- 避免在客户端代码中存储敏感信息
- 环境变量验证脚本确保必需变量存在

## 最佳实践

### 开发阶段

1. **输入验证**: 始终验证和清理用户输入
2. **错误处理**: 不要在生产环境中暴露敏感错误信息
3. **依赖更新**: 定期更新依赖包以修复安全漏洞
4. **代码审查**: 进行安全代码审查

### 部署阶段

1. **HTTPS**: 确保使用 HTTPS 协议
2. **CSP**: 考虑实施内容安全策略
3. **监控**: 实施错误监控和日志记录
4. **备份**: 定期备份重要数据

## 安全检查清单

- [ ] 所有用户输入都经过验证
- [ ] 实施了适当的安全头
- [ ] 环境变量配置正确
- [ ] 依赖包是最新版本
- [ ] 错误处理不暴露敏感信息
- [ ] 图片和资源来自可信域名

## 报告安全问题

如果发现安全问题，请通过以下方式报告：

- 邮箱: security@agentstore.com
- GitHub Issues: [创建安全报告](https://github.com/your-org/agent-store/security/advisories)

## 更新日志

- 2025-01-XX: 初始安全配置
- 添加输入验证和清理
- 配置安全头
- 实施环境变量验证 